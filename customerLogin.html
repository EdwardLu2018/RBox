<!DOCTYPE HTML>
<html lang="en">
    <head>
        <title>Customer Login</title>
    </head>
    <body>
        <center>Enter your full name and doctor's code:</center>
        <form action="customerView.html" method="get">
            <center>Name: <input type="text" id="name"><br></center>
            <center>Code: <input type="password" id="code" maxlength="10"><br></center>
            <center><input type="submit" onclick="return validateForm();"></center>
        </form>
        
        <script>
            var patientDict = JSON.parse(localStorage.getItem("patientDict"));
            function validateForm() {
                var name, code;
                name = document.getElementById("name").value;
                code = document.getElementById("code").value;
                
                for(var patient in patientDict) {
                    if (patientDict.hasOwnProperty(String(name)) && String(patientDict[patient][3]) === code) {
                        localStorage.setItem("currentPatient", patient);
                        return true;
                    }
                    else {
                        alert("Name or code incorrect! Try again!");
                        return false;
                    }
                }
            }
        </script>
    </body>
</html>
